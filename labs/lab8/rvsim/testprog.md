# Test programs

The test programs are in input directory. The expected output are in output
directory.

The output of some programs depends on the values in argument registers, like
a0 and a1. If the command line arguments are not mentioned in the description,
the expected output is generated using the default values in argument register.
a0 = 10, a1 = 11, and so on.

Test the processor and programs with more values.

You can save the output of the program in a file. The syntax depends on the shell. 
Here are some examples.

```
# cmd
python rvsim.py input\t-add.txt > t-add-out.txt 

# Powershell 5.x
python rvsim.py input\t-add.txt | out-file -encoding ascii t-add-out.txt

# bash
python3 rvsim.py input/t-add.txt > t-add-out.txt 
```

Then you may use file comparison tool to compare the output of your simulator with
the files in output directory. Please examine the output manually, too. Tools
are just helping.

```
# Linux
diff file1 file2

# Powershell
diff (cat file1) (cat file2)
Compare-Object (Get-Content file1) (Get-Content file2)

# Python difflib 
diff.py file1 file2
py C:\Python310\Tools\script\diff.py file1 file2

#vim
vim -d file1 file2
vimdiff file1 file2
```

### t-add

t-add tests ADD and SUB instructions.

The value in the following registers are doubled: x0, x1, x4 to x9.

The value in the following registers are doulbed and then negated: x10 to x31.

0x10 (16) is added to x2 and x3.

The output provided is the output of the following command.

```
python rvsim.py input\t-add.txt 
```

### t-and

Only two instructions in t-and. Registers a0(x10) and a1(x11) can be set from
the command line arguments.

```
and     x28, x10, x11
or      x29, x10, x11
```

The output provided is the output of the command with the following commands. 

```
python rvsim.py input\t-and.txt -a 0x12345678 0x0F0F0F0F
```

Try to change a0 and a1 to other values and check the results.

### t-beq

This program tests if the processor can do loops. The pseudocode is as follows.

```
for (x30 = 0; x30 != a0; x30 += 1);
```

By default, a0 is 10. Its value can be set from the command line argument. Set
a0 to different positive values and observe the simulation time. 

The output provided is the output of the following command.

```
python rvsim.py input\t-beq.txt 
```

Try to set a0 to other values and observe how simulation time changes. 
For example, 

```
python rvsim.py input\t-beq.txt -a 11
python rvsim.py input\t-beq.txt -a 20
```

### t-sw

The program stores all registers into global data section.

The output provided is the output of the following command.

```
python rvsim.py input\t-sw.txt 
```

### t-sll

Test shift operations. The pseudocode is as follows.

```
x28 = x10 << x4
x29 = x10 << x11
x30 = x10 >> x11   # unsigned, SRL
x30 = x10 >> x11   # signed, SRA
```

The output provided is the output of the following command.

```
python rvsim.py input\t-sll.txt -a 0xABCDEF12 12 
```

### fib

Compute Fibonacci sequence until F(a0) and save the numbers in memory. 

There are two output files. They are generated by the following commands.

```
python rvsim.py input\fib.txt

python rvsim.py input\fib.txt -e 0 -a 47
```
